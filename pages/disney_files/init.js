(function(e,w){var m=e["$NAME_SPACE"]="tdrec";var t=e[m]=e[m]||{};t.lib=t.lib||{};t.prop=t.prop||{};t.module=t.module||{};t.config=t.config||{};t.dom=t.dom||{};var v={api:{ZIPCODE:"/online/api/addressByZipCode/"}};var q={$win:$(e),$doc:$(w)};var b={isJp:context.isJp,isSp:context.isSp};var a={exportsTo:p,storage:g(),api:n()};var j={loadScript:r(),bindTemplate:l,checkZipCode:o,getQuery:u,createQuery:k,cookie:f(),parse:c,url:i,is:s};var d={zipCode:{url:v.api.ZIPCODE,success:function(x){},error:function(x){}}};b.scrollY=0;b.referrer=j.url(w.referrer);b.path=e.location.pathname;a.api.base=a.api.make(d);q.$win.on("scroll",function(){t.prop.scrollY=$(this).scrollTop()});p(t.prop,b);p(t.dom,q);p(t.module,a);p(t.lib,j);p(t.config,v);function p(z,A,x){var y;z=z||e;for(y in A){z[y]&&!x?h("conflict with the object. : [ "+y+" ]"):z[y]=A[y]}}function r(){var x={};return function(B,D){var E;if(x[B]){return z}x[B]=1;var A;var y=w.getElementsByTagName("script");var C=y.length;var F=y[C-1].src.substring(0,y[C-1].src.lastIndexOf("/")+1);A=w.createElement("script");A.src=!D?(F+B):B;y[0].parentNode.appendChild(A);A.onload=function(){E&&E()};return z;function z(G){E=G||function(){};x[B]&&E()}}}function l(x,y){if(!x||!y){return""}return x.replace(/{{[0-9]}}/g,function(z){return(Array.isArray(y)?y:[y])[z.match(/[0-9]/)[0]]||""})}function h(x){throw"error: "+x}function c(x){var z;try{z=JSON.parse(x)}catch(y){z=(new Function("return "+x))()}finally{return z}}function u(B){B=B||e.location.search;if(B.indexOf("?")>=0){B=B.substr(B.indexOf("?")+1)}var z,D,y;var C=B.split("&");var x=C.length;var A={};for(;x--;){y=C[x].indexOf("=");if(y>0){z=C[x].substring(0,y);D=C[x].substring(y+1);A[z]=D}}return A}function k(z){if(!z){return}var y=[],x;for(x in z){z[x]&&(y[y.length]=enc_(x)+"="+enc_(z[x]))}return y.join("&")}function i(x){x=x||"";var y=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var z={};if(x.match(y)){z.protocol=RegExp.$2;z.hostname=RegExp.$4;z.pathname=RegExp.$5;z.query=RegExp.$7;z.hash=RegExp.$8;z.full=x}return z}function s(x,y){var z=Object.prototype.toString.call(y).slice(8,-1);return y!==undefined&&y!==null&&z===x}function o(z){var x;var y={EMPTY:1,ILLEGAL:2,NORMAL:0};if(!z){x=y.EMPTY}else{if(!z.match(/^\d{3}-?\d{4}$/)){x=y.ILLEGAL}else{x=y.NORMAL}}return x}function f(){return{set:z,get:y,delate:x};function z(B,D,C){var A=B+"="+encodeURIComponent(D);if(C){C.domain&&(A+="; domain="+C.domain);C.path&&(A+="; path="+C.path);C.expires&&(A+="; expires="+C.expires)}w.cookie=A}function y(A){if(!w.cookie){return""}var D=w.cookie;var B=D.indexOf(A+"="),C;if(B<0){return null}B=B+A.length+1;C=D.indexOf(";",B);(C<0)&&(C=D.length);return D.substring(B,C)}function x(B){var E=/^\s+|\s+$/g;var F=(function(){var H=new Date();H.setYear(H.getFullYear()-1);return H.toUTCString()})();if(w.cookie!==""){var D=w.cookie.split(";");var C=D.length;var G,A="";for(;C--;){G=D[C].split("=")[0].replace(E,"");if(G===B){A=G+"=;expires="+F+"; path=/;"}}w.cookie=A}}}function n(){var z=function(A){this.opt=A;this.data={};this.reqId={}};z.make=function(A){return new this(A)};z.prototype={request:x,commonError:y};return z;function x(C,B){B=B||{};var A=this;var D=this.opt[C];var E={type:D.type||"POST",url:D.url||"",data:B.data||D.data||null,dataType:D.dataType||"json",cache:D.cache||false,success:function(F){A.data[C]=F;this.result=D.success?D.success(F):null},error:function(F){D.error?D.error(F):A.commonError(C);this.result=D.error?D.error(F):null}};return $.ajax(E)}function y(A){h("api error [ "+A+" ]")}}function g(){var G="_";var B=function(K,L){K||I("識別名は必須です。");this.prefix=K;this.storage=L};B.make=J;B.show=H;B.get=A;B.clear=y;B.hasStorage=D;B.prototype={set:x,get:E,del:z,show:H,clear:y,};return B;function x(K,M){var L;M=JSON.stringify(M);L=C(this.prefix,K);this.storage.setItem(L,M);return K}function E(K){K=C(this.prefix,K);return c(this.storage.getItem(K))}function z(K){this.storage.removeItem(K)}function I(K){throw new Error(K)}function J(L,K){return new this(L,F(K))}function D(K){try{e[K].setItem("hasStorage","1");e[K].removeItem("hasStorage");return true}catch(L){return false}}function y(K){var L=F(K);if(!L){return null}L.clear()}function A(K,L){var M=F(L);if(!M){return null}return c(M.getItem(K))}function H(N){var P=F(N);if(!P){return null}var M,L;var O={};var K=P.length;if(!K){console.log("no storage data.")}for(M=0;M<K;M++){L=P.key(M);O[L]=A(L)}console.log("-------------------- storage data --------------------");console.log(O);console.log("------------------------------------------------------")}function F(K){K=K||"localStorage";return D(K)?e[K]:null}function C(L,M){var K=G;L===""&&(K="");return L+K+M}}})(window,window.document);